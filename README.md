# Songs Semantic Analysis Framework
This framework computes semantic similarity matrices of songs over years using multiple methods and models.

## Pre-processing and Data Generation
Before running the analysis, you need to prepare your dataset. The **topics** (titles and references), **segments** (lyric portions), and **normalized_text** (lemmatized text) can be automatically generated using the following notebook:

ðŸ‘‰ [**Songs Pre-processing Notebook (Google Colab)**](https://colab.research.google.com/drive/1xZpso5ChbBPlyt8gQw66fyvUVmIB_C89?usp=sharing)

Once the data is processed via the notebook, the resulting JSON file will be ready for the framework to proceed with the semantic analysis.

## Songs JSON Format
The dataset should be structured as a dictionary where **each key is a year** (as a string), and the value is a list of song entries for that year. Each song entry is a dictionary with the following fields:

| Key | Type | Description |
|-----|------|-------------|
| `song` | string | Full song name including performer(s) (e.g., `"Marco Verdi - Oltre il muro"`). |
| `text` | string | Full original lyrics of the song. |
| `title` | string | Song title only. |
| `authors` | string | Names of the authors/composers. |
| `performers` | string | Names of the performers. |
| `normalized_text` | string | Normalized or lemmatized lyrics (generated by the notebook). |
| `segments` | list of strings | Lyric segments or lines split for easier processing (generated by the notebook). |
| `topics` | list of objects | Extracted thematic labels containing `topic_title` and `reference_lyrics` (generated by the notebook). |

### Example
```json
{
  "2010": [
    {
      "song": "Marco Verdi - Oltre il muro",
      "title": "Oltre il muro",
      "authors": "Marco Verdi - Giulia Bianchi",
      "performers": "Marco Verdi",
      "text": "Le strade si perdono tra i palazzi di vetro\ncerco un motivo per non tornare indietro...",
      "topics": [
        {
          "topic_title": "Amore e separazione",
          "reference_lyrics": "cerco un motivo per non tornare indietro, le parole che non ti ho mai detto davvero"
        },
        {
          "topic_title": "Dolore e nostalgia",
          "reference_lyrics": "il dolore, il sapore di un bacio rubato in un giorno di pioggia"
        }
      ],
      "segments": [
        "Le strade si perdono tra i palazzi di vetro\ncerco un motivo per non tornare indietro",
        "il rumore del traffico Ã¨ un battito lento\nche cancella ogni mio sentimento."
      ],
      "normalized_text": "le strade si perdono tra il palazzo di vetro\ncerco un motivo per non tornare indietro..."
    }
  ],
  "2011": [
    {
      "song": "Luca G. - Cielo di pioggia",
      "title": "Cielo di pioggia",
      "authors": "Luca G. - Sara Neri",
      "performers": "Luca G.",
      "text": "Le nuvole basse coprono i tetti...",
      "topics": [
        {
          "topic_title": "Natura e condizioni climatiche",
          "reference_lyrics": "Le nuvole basse coprono i tetti nascondono tutti i nostri difetti"
        }
      ],
      "segments": [
        "Le nuvole basse coprono i tetti nascondono tutti i nostri difetti",
        "respiro l'odore della terra bagnata in questa mattina cosÃ¬ complicata."
      ],
      "normalized_text": "le nuvola bassa copre il tetto\nnasconde il nostro difetto..."
    }
  ]
}
```

## Credentials JSON Format

The framework requires a JSON file containing the OpenAI API keys for the services you want to use. The structure is as follows:

```json
{
  "openai": {
    "api_key": "YOUR_OPENAI_API_KEY"
  }
}
```

Note: The OpenAI API key can also be provided with Azure by specifying the API version and endpoint, for example:

```json
{
  "openai": {
    "api_key": "YOUR_API_KEY",
    "api_version": "2024-06-01",
    "azure_endpoint": "https://your-custom-endpoint.openai.azure.com/"
  }
}
```

> **Note on OpenAI:** If OpenAI credentials are not provided, the framework will still run. However, it will skip the specific semantic similarity calculations that depend on OpenAI models.

